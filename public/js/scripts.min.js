function successWord(){return["Great","Yea","Radical","Good","Awesome","Fantastic","All right","Beautiful","Bingo","Far out"][Math.floor(10*Math.random()+1)-1]}function queryParams(e){var a=[];for(var r in e)a.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return a.join("&")}angular.module("mainCtrl",["ngRoute"]).controller("main",["$scope","$http","$location","Player","$timeout",function(e,a,r,o,t){e.playerData={},e.loading=!0,e.addMessage="",e.showAddMessage=!1,e.gameMessage="",e.showGameMessage=!1,e.go=function(e){r.path(e)},o.get().then(function(a){e.players=a.data,e.loading=!1},function(e){console.log(e)}),e.addPlayer=function(){e.loading=!0;var a=e.playerData.name;console.log(a),""!=a&&void 0!=a?o.save(e.playerData).then(function(a){e.showErrorMessage=!1,e.addMessage=successWord()+"! "+e.playerData.name+" has been added!",e.showAddMessage=!0,e.loading=!1,t(function(){e.showAddMessage=!1,e.addMessage="",e.playerData.name=null},5e3)},function(a){var r=a.data.errors.name;e.addErrorMessage="Oops! "+r,e.showErrorMessage=!0,e.loading=!1}):(e.addErrorMessage="Really?... You want your name to be whitespace. C'mon dude.",e.showErrorMessage=!0,e.loading=!1)},e.start=!1,e.setPlayer=function(a,r){1===r?(e.playerData.player1=a.toElement.innerHTML,e.player1DropShow=!1):2===r&&(e.playerData.player2=a.toElement.innerHTML,e.player2DropShow=!1)},e.startGame=function(){var a=e.playerData.player1;console.log("p1: "+a);var r=e.playerData.player2;""!=a&&void 0!=a&&""!=r&&void 0!=r?e.start=!0:(e.recordErrorMessage="Enter names for both players",e.showRecordErrorMessage=!0)},e.setWinner=function(a){e.playerData.winner=a,e.recordGame()},e.recordGame=function(){e.loading=!0,o.update(e.playerData).then(function(a){e.gameMessage="Congrats on the win, "+e.playerData.winner+"!",e.showGameMessage=!0,e.loading=!1,t(function(){e.showGameMessage=!1,e.gameMessage=""},5e3)},function(a){e.loading=!1,console.log(a),e.recordErrorMessage="Something went wrong",e.showRecordErrorMessage=!0})}}]);var app=angular.module("app",["mainCtrl","playerService","routes"]);angular.module("playerService",[]).factory("Player",["$http",function(e){return{get:function(){return e.get("/api/players")},save:function(a){return e({method:"POST",url:"/api/players",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:queryParams(a)})},update:function(a){return e({method:"PUT",url:"/api/players/"+a,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:queryParams(a)})}}}]),angular.module("routes",["ngRoute"]).config(["$locationProvider","$routeProvider",function(e,a){e.html5Mode(!0).hashPrefix("!"),a.when("/record",{templateUrl:"/../templates/record.tpl.html",controller:"main"}).when("/leaderboard",{templateUrl:"/../templates/leaderboard.tpl.html",controller:"main"}).when("/add",{templateUrl:"/../templates/add.tpl.html",controller:"main"}).otherwise({templateUrl:"/../templates/actions.tpl.html",controller:"main"})}]);